{% comment %}
	Enable 'previous'/'next' page functionality without
	disturbing site structure where each distinct book is
	contained in its own directory. Other approaches involve
	plugins, 'posts', and 'collections'. This approach is
	only concerned with the number of pages in a directory. It's
	slow but is an uncomplicated solution.
{% endcomment %}
{% assign path = page.dir %}
{% assign limit = 0 %}
{% for page in site.pages %}
  {% if page.dir == path %}
	  {% assign limit = limit | plus: 1 %}
	{% endif %}
{% endfor %}

{% comment %}
	Adjust for meta pages: toc.md, etc.
{% endcomment %}
{% assign limit = limit | minus: 1 %}

{% assign prev = page.name | remove: ".md" | minus: 1 %}
{% assign next = page.name | remove: ".md" | plus: 1 %}

{% capture toc %}
<ul>
{% assign i = 0 %}
{% for page in site.html_pages %}
	{% for item in site.html_pages %}
		{% assign filename = item.name | replace: '.md','' | split: '--' %}
		{% assign number = filename[0] | plus: 0 %}
		{% assign name = filename[1] %}
		{% if number == i %}
			<li><a href="/_pages/1/{{item.name | replace: '.md', '.html'}}">{{ name | default: item.title | default: item.name }}</a></li>
			{% break %}
		{% endif %}
	{% endfor %}
	{% assign i = i | plus: 1 %}
{% endfor %}
</ul>
{% endcapture %}

<!DOCTYPE html>
<html lang="en">
{% include head.html %}

<body>
	{% include header.html %}
	<main>
		{% if prev > 0 %}
		  <a id='prev' class="adv" href="{{ prev }}.html">◀</a>
		{% endif %}
		<article>
			{{ content }}
		</article>
		{% if next < limit %}
		  <a id='next' class="adv" href="{{ next }}.html">▶</a>
		{% endif %}
	</main>
	{% include footer.html %}
</body>

</html>
